## Methods

Dogs were recruited by word of mouth in several locations between July and November 2022.
Breed organization registration of each dog was confirmed through bymanuallythroughby viewing the dog's breed organization paperwork or locating the dog in the American Kennel Club (AKC) database.
Recruitment was run to ensure full coverage of dog breeds across breed clades ([]).
Each dog was randomized to either the control or treatment group (randomized photo), and dogs in the treatment group were paired based on their order of enrollmentenrollment order in the study.
These Group Assignments were evaluated to ensure that dogs within a breed clade (per [@doi:10.1016/j.celrep.2017.03.079]) were not paired.
All enrolled of the dogs enrolled came from different households.
This design, ensuring avoidedensured that there could be no cross-contamination of dogs within the study.

We evaluated six tests on the market at the end of 2021, when the study began.
DTC genetic tests were purchased directly from each company's website.
To the extent that the information was available, each test used a distinct combination of genotyping technologies, breed classification algorithms, and reference panels (Table {#tbl:tests}).
While this study focuses on the methodologies, a detailed breakdown of consumer-oriented similarities and differences among several of these tests is available elsewhere [].
Kits were registered according to the instructions provided, using the dog's own photograph (control) or the photograph of a paired dog (treatment).
The kits were then delivered to the owner, who was instructed to collect buccal swabs for each of the six 6 kits in Table {#tbl:tests} ??
according to manufacturer instructions and mail the samples using the company-provided packaging.
Genetic testing was conducted by each DTC genetic testing company according to their own protocols.
The breed determination results were returned to the experimentersauthors, who retrieved the results for each dog and recorded all results for the determined breeds and the corresponding percentage composition in a spreadsheet.

Finally, As a positive control for a the potential photographic test biasthat would be biased by the photograph-based prediction, we evaluated each sample/photograph pair using a pre-trained convolutional neural network, to predict breed.
Dog breed classification is a classic problem in computer vision, and models trained on images from a large compendium (ImageNet) have been evaluated for their performance in classifying photographs of purebred dogs, with the model NASNet showing particularly robust performance [@doi:10.1007/s11633-020-1261-0; @doi:10.1109/sisy.2018.8524715; @doi:10.1109/iciteed.2019.8929955].
Therefore, NASNet complements DTC genetic testing results by predicting breeds based on photograph exclusively on photographs exclusively.
The We loaded the NASNet model nasnetalarge was loaded from the Python package PyTorch Image Models (timm version 0.6.12) [@url:https://github.com/rwightman/pytorch-image-models] and used to classify each of the dog photos.
Because The classifier provides estimates forestimates a large number ofmany categories with a very long tail, and so only results with a score greater than 1% were included in the analysis.

To evaluate whether the treatment (swapping the photographs) affected breed prediction for each DTC test, the proportion of results matching the registered breed across the two conditions waswere compared by calculating the odds ratio.
In cases where a test had either zero matching or zero non-matching predictions within a condition (i.e., one or more zero cells), the Haldane-Anscombe correction [@doi:10.1081/sac-200040691] was applied per [@doi:10.1002/jrsm.1460; @doi:10.15678/znuek.2015.0941.0504].
The probability of both the treatment and control results coming from the same distribution was evaluated using a one-tailed Fisher's exact test.
Both statistical tests were conducted in R using the package vcd [@url:https://CRAN.R-project.org/package=vcd].

Based on qualitative patterns observed in the results, the decision was made *post hoc* to compare the phylogenetic clades [@doi:10.1016/j.celrep.2017.03.079] of predicted breeds to those of the registered breeds of the DNA donor and photographed dogs.
Each breed was mapped onto a clade, as identified by [@doi:10.1016/j.celrep.2017.03.079] or based on its close genetic relationship to breeds assigned to clades in [@doi:10.1016/j.celrep.2017.03.079].
In the treatment condition, the clade of each predicted breed was theneach predicted breed's clade was compared to the clades of the DNA donor versus the dog whose photograph was provided to the testing company.
In the control condition, dogs wereeach dog was paired with another dog (based on the order in which they were recruited).
The breed predictions were then evaluated to determine whether their clade matched the clade of the photographed or paired dog (in the treatment and control conditions, respectively).
The goal of this analysis was to evaluate whether results that matched neither the registered breed of the DNA donor nor the photograph provided were closely related to, but not identical to, the photographed dog.
Once again, an Odds ratio and Fisher's exact test were applied with using the vcd package in R. Additionally, the results at the level of breed clade were plotted in R using the ternary package [@url:https://CRAN.R-project.org/package=Ternary].

